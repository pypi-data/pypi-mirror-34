!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(2),e.exports=n(1)},function(e,t){"use strict";window.BrowseAPI=function(){function e(e){var n=e.filter,o=e.disabledMenus,r=e.kind,i=window.ShuupAdminConfig.browserUrls[r];if(!i)throw new Error(gettext("No browser URL for kind:")+" "+r);"string"!=typeof n&&(n=JSON.stringify(n));var a="m-"+ +new Date,c=_.compact(["popup=1","kind="+r,"pick="+a,n?"filter="+n:null,o?"disabledMenus="+o.join(","):null]).join("&"),u=window.open(i+(i.indexOf("?")>-1?"&":"?")+c,"browser_popup_"+a,"resizable,menubar=no,location=no,scrollbars=yes");return t[a]=_.extend({popup:u,$container:null,onSelect:null},e)}var t={};return window.addEventListener("message",function(e){var n=e.data;if(n.pick){var o=t[n.pick.id];if(o){o.popup.close();var r=n.pick.object;r&&(_.isFunction(o.onSelect)&&o.onSelect.call(this,r),delete t[n.pick.id])}}},!1),{openBrowseWindow:e}}(),$(function(){$(document).on("click",".browse-widget .browse-btn",function(){var e=$(this).closest(".browse-widget");if(e.length){var t=e.data("browse-kind"),n=e.data("filter");try{return window.BrowseAPI.openBrowseWindow({kind:t,filter:n,onSelect:function(t){e.find("input").val(t.id);var n=e.find(".browse-text");n.text(t.text),n.prop("href",t.url||"#")}})}catch(e){return alert(e),!1}}}),$(document).on("click",".browse-widget .clear-btn",function(){var e=$(this).closest(".browse-widget");if(e.length){var t=e.data("empty-text")||"";e.find("input").val("");var n=e.find(".browse-text");n.text(t),n.prop("href","#")}}),$(document).on("click",".browse-widget .browse-text",function(e){var t=$(this).prop("href");if(/#$/.test(t))return e.preventDefault(),!1})})},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){window.CSRF_TOKEN&&(e.csrfmiddlewaretoken=window.CSRF_TOKEN);var t=Object.keys(e).map(function(t){var n=e[t];return"undefined"!=typeof n?(0,d.default)("input",{type:"hidden",name:t,value:n}):null}),n=(0,d.default)("form",{method:"POST",action:location.href},t);document.body.appendChild(n),n.submit()}function i(e){var t=e.options[e.selectedIndex],n=t.dataset.adminUrl,o=document.getElementById("extra_for_"+e.id),r=interpolate(gettext("Edit %s"),[t.text]);o.innerHTML=n?(0,d.default)("a",{target:"_blank",href:n},[r]).outerHTML:""}var a=n(3),c=o(a),u=n(6),l=n(4),d=o(l),s=n(5),f=o(s);(0,c.default)(function(){(0,f.default)(".layout-cell").on("click",function(){var e=this.dataset,t=e.x,n=e.y,o=(0,u.mutate)({x:t,y:n});location.href="?"+o}),(0,f.default)(".layout-add-cell-btn").on("click",function(){var e=this.dataset,t=e.y,n=e.cellCount,o=e.cellLimit;return n>=o?void alert(interpolate(gettext("Error: Cannot add more than %s cells to one row."),[o])):void r({y:t,command:"add_cell"})}),(0,f.default)(".layout-add-row-btn").on("click",function(){var e=this.dataset.y;r({y:e,command:"add_row"})}),(0,f.default)(".layout-del-row-btn").on("click",function(){if(confirm(gettext("Are you sure you wish to delete this row?"))){var e=this.dataset.y;r({y:e,command:"del_row"})}}),(0,f.default)(".del-cell-btn").on("click",function(){if(confirm(gettext("Are you sure you wish to delete this cell?"))){var e=this.dataset,t=e.x,n=e.y;r({x:t,y:n,command:"del_cell"})}}),(0,f.default)(".publish-btn").on("click",function(){confirm(gettext("Are you sure you wish to publish changes made to this view?"))&&r({command:"publish"})}),(0,f.default)(".revert-btn").on("click",function(){confirm(gettext("Are you sure you wish to revert all changes made since the last published version?"))&&r({command:"revert"})});var e=!1;(0,f.default)("input, select, textarea").on("change,input",function(){"id_general-plugin"!==this.id&&(e=!0)}),(0,f.default)("#id_general-plugin").on("change",function(){e&&!confirm(gettext("Changing plugins will cause other changes made on this form to be lost."))||r({command:"change_plugin",plugin:this.value})}),(0,f.default)(".xtheme-model-choice-widget").each(function(e){i(e),e.addEventListener("change",function(){i(document.getElementById(this.id))})}),new Sortable(document.querySelector(".layout-rows"),{handle:".layout-move-row-btn",onUpdate:function(e){r({command:"move_row_to_index",from_y:e.oldIndex,to_y:e.newIndex})}});for(var t=document.getElementsByClassName("layout-row-cells"),n=0;n<t.length;n++)new Sortable(t[n],{group:"cells",onUpdate:function(e){r({command:"move_cell_to_position",from_x:e.item.dataset.x,from_y:e.item.dataset.y,to_x:e.newIndex,to_y:e.item.dataset.y})},onAdd:function(e){r({command:"move_cell_to_position",from_x:e.item.dataset.x,from_y:e.item.dataset.y,to_x:Array.prototype.indexOf.call(e.item.parentNode.children,e.item),to_y:e.item.parentNode.parentNode.dataset.y})}})}),window.refreshPlaceholderInParent=function(e){window.parent.postMessage({reloadPlaceholder:e},"*")}},function(e,t){"use strict";function n(){if(r.forEach(function(e){document.removeEventListener(e,n)}),!i){i=!0;for(var e;e=o.shift();)e()}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){i?setTimeout(e,0):o.push(e)};var o=[],r=["DOMContentLoaded","load"],i="complete"===document.readyState;i||r.forEach(function(e){document.addEventListener(e,n)})},function(e,t){"use strict";function n(e){return Array.isArray(e)?e:Array.from(e)}function o(e,t){for(var n in t)if(t.hasOwnProperty(n))if("$events"!==n)e[n]=t[n];else{var o=t[n];for(var r in o)o.hasOwnProperty(r)&&e.addEventListener(r,o[r],!1)}}function r(e,t){t&&!Array.isArray(t)&&(t=[t]),(t||[]).forEach(function(t){t&&("string"==typeof t&&(t=document.createTextNode(t)),e.appendChild(t))})}function i(e,t,i){var a=e.split("."),c=n(a),u=c[0],l=c.slice(1),d=document.createElement(u);return l.forEach(function(e){d.classList.add(e)}),Array.isArray(t)&&(i=t,t={}),o(d,t),r(d,i),d}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t){"use strict";function n(e){return Array.isArray(e)?e:(""+e).split(/,\s*/)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n={context:t,elements:[].slice.call(t.querySelectorAll(e))};for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o].bind(n));return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r={};r.on=function(e,t){return e=n(e),this.each(function(n){e.forEach(function(e){return n.addEventListener(e,t)})}),this},r.off=function(e,t){return e=n(e),this.each(function(n){e.forEach(function(e){return n.removeEventListener(e,t)})}),this},r.each=function(e){return this.elements.forEach(e),this}},function(e,t){"use strict";function n(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&e[n]&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.sort().join("&")}function o(e){var t={};return null!==e&&void 0!==e||(e=location.search.replace(/^\?/,"")),e.split("&").forEach(function(e){var n=e.split("=",2),o=c(n,2),r=o[0],i=o[1];t[r]=void 0===i||i}),t}function r(e,t){for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];null===o||void 0===o?delete e[n]:e[n]=o}return e}function i(e,t){var i=o(t);return r(i,e),n(i)}function a(e,t){var n=e.split("?",2),o=c(n,2),r=o[0],a=o[1];return a=i(t,a||""),r+(a.length?"?"+a:"")}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&c.return&&c.return()}finally{if(r)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.stringify=n,t.parse=o,t.mutateObj=r,t.mutate=i,t.mutateURL=a}]);