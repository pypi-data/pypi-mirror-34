#!/usr/bin/env python
from __future__ import print_function

import argparse, sys
from chokola import call

__version__ = '0.2.1'
__program__ = 'chokola'


def main(args):

    if args.version:
        print('{0} {1}\nPython {2}'.format(__program__, __version__, sys.version))
        raise SystemExit

    call(args.source)


if __name__ == '__main__':

    try:
        parser = argparse.ArgumentParser(prog=__program__, add_help=False)
        parser.add_argument('source', help='YAML file.', nargs='?')
        parser.add_argument('-v', '--version', help='Show program\'s version number and exit.', action='store_true')
        parser.add_argument('-h', '--help', action='help', default=argparse.SUPPRESS, help='Show this help message and exit.')
        args = parser.parse_args()

        main(args)

    except RuntimeError as e:
        print(e)

    except (KeyboardInterrupt, SystemExit):
        pass
