

POL2STACK
=========


Purpose
~~~~~~~
Combine multiple Q, U and I images and create a vector catalogue from
them


Description
~~~~~~~~~~~
This script combines multiple Q, U and I images and creates a vector
catalogue from them.
By default, the Q, U, I and PI catalogue values, together with the
maps specified by parameters "QUI" and "PI", are in units of Jy/beam
(see parameter Jy).


Usage
~~~~~


::

    
       pol2stack inq inu ini cat pi [retain] [qui] [in] [msg_filter] [ilevel] [glevel]
                 [logfile]
       



ADAM parameters
~~~~~~~~~~~~~~~



CAT = LITERAL (Read)
````````````````````
The output FITS vector catalogue.



DEBIAS = LOGICAL (Given)
````````````````````````
TRUE if a correction for statistical bias is to be made to percentage
polarization and polarized intensity. [FALSE]



GLEVEL = LITERAL (Read)
```````````````````````
Controls the level of information to write to a text log file. Allowed
values are as for "ILEVEL". The log file to create is specified via
parameter "LOGFILE. In adition, the glevel value can be changed by
assigning a new integer value (one of starutil.NONE,
starutil.CRITICAL, starutil.PROGRESS, starutil.ATASK or
starutil.DEBUG) to the module variable starutil.glevel. ["ATASK"]



ILEVEL = LITERAL (Read)
```````````````````````
Controls the level of information displayed on the screen by the
script. It can take any of the following values (note, these values
are purposefully different to the SUN/104 values to avoid confusion in
their effects):


+ "NONE": No screen output is created
+ "CRITICAL": Only critical messages are displayed such as warnings.
+ "PROGRESS": Extra messages indicating script progress are also
displayed.
+ "ATASK": Extra messages are also displayed describing each atask
invocation. Lines starting with ">>>" indicate the command name and
parameter values, and subsequent lines hold the screen output
generated by the command.
+ "DEBUG": Extra messages are also displayed containing unspecified
  debugging information. In addition scatter plots showing how each Q
  and U image compares to the mean Q and U image are displayed at this
  ILEVEL.

In adition, the glevel value can be changed by assigning a new integer
value (one of starutil.NONE, starutil.CRITICAL, starutil.PROGRESS,
starutil.ATASK or starutil.DEBUG) to the module variable
starutil.glevel. ["PROGRESS"]



IN = Literal (Read)
```````````````````
A group of container files, each containing three 2D NDFs in
components Q, U and I, as created using the QUI parameter of the
pol2cat script. Parameters INQ, INU and INI are used if a null (!)
value is supplied for IN. [!]



INI = Literal (Read)
````````````````````
A group of input I maps in units of pW. Only used if a null value is
supplied for parameter IN.



INQ = Literal (Read)
````````````````````
A group of input Q maps in unts of pW. Only used if a null value is
supplied for parameter IN.



INU = Literal (Read)
````````````````````
A group of input U maps in units of pW. Only used if a null value is
supplied for parameter IN.



JY = _LOGICAL (Read)
````````````````````
If TRUE, the output catalogue, and the output Q, U, PI and I maps will
be in units of Jy/beam. Otherwise they will be in units of pW (in this
case, the I values will be scaled to take account of any difference in
FCFs for POL-2 and non-POL-2 observations). [True]



LOGFILE = LITERAL (Read)
````````````````````````
The name of the log file to create if GLEVEL is not NONE. The default
is "<command>.log", where <command> is the name of the executing
script (minus any trailing ".py" suffix), and will be created in the
current directory. Any file with the same name is over-written. The
script can change the logfile if necessary by assign the new log file
path to the module variable "starutil.logfile". Any old log file will
be closed befopre the new one is opened. []



MSG_FILTER = LITERAL (Read)
```````````````````````````
Controls the default level of information reported by Starlink atasks
invoked within the executing script. This default can be over-ridden
by including a value for the msg_filter parameter within the command
string passed to the "invoke" function. The accepted values are the
list defined in SUN/104 ("None", "Quiet", "Normal", "Verbose", etc).
["Normal"]



PI = NDF (Read)
```````````````
The output NDF in which to return the polarised intensity map. No
polarised intensity map will be created if null (!) is supplied. If a
value is supplied for parameter IREF, then PI defaults to null.
Otherwise, the user is prompted for a value if none was supplied on
the command line. []



QUI = NDF (Read)
````````````````
If a value is supplied for QUI, the total Q, U and I images that go
into the final polarisation vector catalogue will be saved to disk as
a set of three 2D NDFs. The three NDFs are stored in a single
container file, with path given by QUI. So for instance if QUI is set
to "stokes.sdf", the Q, U and I images can be accessed as "stokes.q",
"stokes.u" and "stokes.i". [!]



RETAIN = _LOGICAL (Read)
````````````````````````
Should the temporary directory containing the intermediate files
created by this script be retained? If not, it will be deleted before
the script exits. If retained, a message will be displayed at the end
specifying the path to the directory. [FALSE]



Copyright
~~~~~~~~~
Copyright (C) 2013 Science & Technology Facilities Council. Copyright
(C) 2015 East Asian Observatory. All Rights Reserved.


Licence
~~~~~~~
This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either Version 2 of the License, or (at
your option) any later version.
This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
General Public License for more details.
You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
02110-1301, USA.


