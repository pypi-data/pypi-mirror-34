

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Module exec &mdash; Inmanta 2017.4dev documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Inmanta 2017.4dev documentation" href="../../index.html"/>
        <link rel="up" title="Inmanta modules" href="../modules.html"/>
        <link rel="next" title="Module graphite" href="graphite.html"/>
        <link rel="prev" title="Module drupal" href="drupal.html"/>
<style>
.version a:visited {
  color: rgba(255,255,255,0.3);
}
</style>


  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          


    <a href="../../index.html">



  
    <img src="../../_static/inmanta-logo.png" class="logo" />

    </a>
    <div class="version">
      <a href="/" class="icon icon-home"> Documentation home</a>
    </div>
    <div class="version">
      2017.4dev
    </div>

    
  
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Install Inmanta</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../language.html">Language Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../moduleguides.html">Module guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers.html">Developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Inmanta Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../commands.html">Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html">Configuration Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html">Inmanta API reference</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../modules.html">Inmanta modules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ansible.html">Module ansible</a></li>
<li class="toctree-l3"><a class="reference internal" href="apache.html">Module apache</a></li>
<li class="toctree-l3"><a class="reference internal" href="apt.html">Module apt</a></li>
<li class="toctree-l3"><a class="reference internal" href="aws.html">Module aws</a></li>
<li class="toctree-l3"><a class="reference internal" href="bind.html">Module bind</a></li>
<li class="toctree-l3"><a class="reference internal" href="collectd.html">Module collectd</a></li>
<li class="toctree-l3"><a class="reference internal" href="dns.html">Module dns</a></li>
<li class="toctree-l3"><a class="reference internal" href="docker.html">Module docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="drupal.html">Module drupal</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Module exec</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#entities">Entities</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementations">Implementations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#resources">Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="#handlers">Handlers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="graphite.html">Module graphite</a></li>
<li class="toctree-l3"><a class="reference internal" href="ip.html">Module ip</a></li>
<li class="toctree-l3"><a class="reference internal" href="logging.html">Module logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="mongodb.html">Module mongodb</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitoring.html">Module monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="mysql.html">Module mysql</a></li>
<li class="toctree-l3"><a class="reference internal" href="net.html">Module net</a></li>
<li class="toctree-l3"><a class="reference internal" href="openstack.html">Module openstack</a></li>
<li class="toctree-l3"><a class="reference internal" href="openvswitch.html">Module openvswitch</a></li>
<li class="toctree-l3"><a class="reference internal" href="param.html">Module param</a></li>
<li class="toctree-l3"><a class="reference internal" href="php.html">Module php</a></li>
<li class="toctree-l3"><a class="reference internal" href="platform.html">Module platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="redhat.html">Module redhat</a></li>
<li class="toctree-l3"><a class="reference internal" href="ssh.html">Module ssh</a></li>
<li class="toctree-l3"><a class="reference internal" href="std.html">Module std</a></li>
<li class="toctree-l3"><a class="reference internal" href="ubuntu.html">Module ubuntu</a></li>
<li class="toctree-l3"><a class="reference internal" href="user.html">Module user</a></li>
<li class="toctree-l3"><a class="reference internal" href="varnish.html">Module varnish</a></li>
<li class="toctree-l3"><a class="reference internal" href="web.html">Module web</a></li>
<li class="toctree-l3"><a class="reference internal" href="yum.html">Module yum</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Inmanta</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Inmanta Reference</a> &raquo;</li>
        
          <li><a href="../modules.html">Inmanta modules</a> &raquo;</li>
        
      <li>Module exec</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-exec">
<h1>Module exec<a class="headerlink" href="#module-exec" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><ul class="simple">
<li>License: Apache 2.0</li>
<li>Version: 0.6.0</li>
<li>Author: Inmanta &lt;<a class="reference external" href="mailto:code&#37;&#52;&#48;inmanta&#46;com">code<span>&#64;</span>inmanta<span>&#46;</span>com</a>&gt;</li>
<li>This module requires compiler version 2017.1 or higher</li>
<li>Upstream project: <a class="reference external" href="https://github.com/inmanta/exec.git">https://github.com/inmanta/exec.git</a></li>
</ul>
</div></blockquote>
<div class="section" id="entities">
<h2>Entities<a class="headerlink" href="#entities" title="Permalink to this headline">¶</a></h2>
<dl class="entity">
<dt id="entity-exec::Run">
<em class="property">entity </em><code class="descclassname">exec::Run</code><a class="headerlink" href="#entity-exec::Run" title="Permalink to this definition">¶</a></dt>
<dd><p>Parents: <a class="reference internal" href="std.html#entity-std::Entity" title="std::Entity entity"><code class="xref inmanta inmanta-entity docutils literal"><span class="pre">std::Entity</span></code></a></p>
<p>Run a command with almost exact semantics as the exec type of puppet</p>
<dl class="attribute">
<dt id="attribute-exec::Run.timeout">
<em class="property">attribute </em>number <code class="descclassname">timeout</code>=300<a class="headerlink" href="#attribute-exec::Run.timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum time the command should take. If the command takes longer, the deploy agent will try to end it.</p>
</dd></dl>

<dl class="attribute">
<dt id="attribute-exec::Run.creates">
<em class="property">attribute </em>string <code class="descclassname">creates</code>=''<a class="headerlink" href="#attribute-exec::Run.creates" title="Permalink to this definition">¶</a></dt>
<dd><p>A file that the command creates, when the file already exists the command will not be executed. This helps to make simple commands idempotent</p>
</dd></dl>

<dl class="attribute">
<dt id="attribute-exec::Run.command">
<em class="property">attribute </em>string <code class="descclassname">command</code><a class="headerlink" href="#attribute-exec::Run.command" title="Permalink to this definition">¶</a></dt>
<dd><p>The actual command to execute. The command should be almost always be idempotent.</p>
</dd></dl>

<dl class="attribute">
<dt id="attribute-exec::Run.reload_only">
<em class="property">attribute </em>bool <code class="descclassname">reload_only</code>=False<a class="headerlink" href="#attribute-exec::Run.reload_only" title="Permalink to this definition">¶</a></dt>
<dd><p>Only use this command to reload</p>
</dd></dl>

<dl class="attribute">
<dt id="attribute-exec::Run.path">
<em class="property">attribute </em>string <code class="descclassname">path</code>=''<a class="headerlink" href="#attribute-exec::Run.path" title="Permalink to this definition">¶</a></dt>
<dd><p>The path to search the command in</p>
</dd></dl>

<dl class="attribute">
<dt id="attribute-exec::Run.cwd">
<em class="property">attribute </em>string <code class="descclassname">cwd</code>=''<a class="headerlink" href="#attribute-exec::Run.cwd" title="Permalink to this definition">¶</a></dt>
<dd><p>The directory from which to run the command. WARNING: Command is spawned in a subshell. This implies that the real path of cwd is used and not a possible symlinked path.</p>
</dd></dl>

<dl class="attribute">
<dt id="attribute-exec::Run.unless">
<em class="property">attribute </em>string <code class="descclassname">unless</code>=''<a class="headerlink" href="#attribute-exec::Run.unless" title="Permalink to this definition">¶</a></dt>
<dd><p>If this attribute is set, the command will only execute if the command in this attribute is not successful (returns not 0). If the command passed to this attribute does not exist, this is interpreted as a non-successful execution.</p>
</dd></dl>

<dl class="attribute">
<dt id="attribute-exec::Run.reload">
<em class="property">attribute </em>string <code class="descclassname">reload</code>=''<a class="headerlink" href="#attribute-exec::Run.reload" title="Permalink to this definition">¶</a></dt>
<dd><p>The command to execute when this run needs to reload. If empty the command itself will be executed again.</p>
</dd></dl>

<dl class="attribute">
<dt id="attribute-exec::Run.environment">
<em class="property">attribute </em>dict <code class="descclassname">environment</code>=Dict()<a class="headerlink" href="#attribute-exec::Run.environment" title="Permalink to this definition">¶</a></dt>
<dd><p>Environment variables to set before the command is executed. An array of variables can be passed as strings in the form var=value</p>
</dd></dl>

<dl class="attribute">
<dt id="attribute-exec::Run.returns">
<em class="property">attribute </em>number <code class="descclassname">returns</code>=List()<a class="headerlink" href="#attribute-exec::Run.returns" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of valid return codes, by default this is only 0</p>
</dd></dl>

<dl class="attribute">
<dt id="attribute-exec::Run.onlyif">
<em class="property">attribute </em>string <code class="descclassname">onlyif</code>=''<a class="headerlink" href="#attribute-exec::Run.onlyif" title="Permalink to this definition">¶</a></dt>
<dd><p>Only execute the command if this command is true (returns 0)</p>
</dd></dl>

<dl class="relation">
<dt id="relation-exec::Run.host">
<em class="property">relation </em>std::Host <code class="descclassname">host</code> [1]<a class="headerlink" href="#relation-exec::Run.host" title="Permalink to this definition">¶</a></dt>
<dd><p>other end: <code class="xref inmanta inmanta-relation docutils literal"><span class="pre">std::Host.exec_run_commands</span> <span class="pre">[0:*]</span></code></p>
</dd></dl>

<p>The following implementations are defined for this entity:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#implementation-exec::execHost" title="exec::execHost implementation"><code class="xref inmanta inmanta-implementation docutils literal"><span class="pre">exec::execHost</span></code></a></li>
</ul>
</div></blockquote>
<p>The following implements statements select implementations for this entity:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#implementation-exec::execHost" title="exec::execHost implementation"><code class="xref inmanta inmanta-implementation docutils literal"><span class="pre">exec::execHost</span></code></a></li>
</ul>
</div></blockquote>
</dd></dl>

</div>
<div class="section" id="implementations">
<h2>Implementations<a class="headerlink" href="#implementations" title="Permalink to this headline">¶</a></h2>
<dl class="implementation">
<dt id="implementation-exec::execHost">
<em class="property">implementation </em><code class="descclassname">exec::execHost</code><a class="headerlink" href="#implementation-exec::execHost" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="exec.Run">
<em class="property">class </em><code class="descclassname">exec.</code><code class="descname">Run</code><a class="headerlink" href="#exec.Run" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>This class represents a service on a system.</div></blockquote>
<ul class="simple">
<li>Resource for entity <a class="reference internal" href="#entity-exec::Run" title="exec::Run entity"><code class="xref inmanta inmanta-entity docutils literal"><span class="pre">exec::Run</span></code></a></li>
<li>Id attribute <code class="docutils literal"><span class="pre">command</span></code></li>
<li>Agent name <code class="docutils literal"><span class="pre">host.name</span></code></li>
<li>Handlers <a class="reference internal" href="#exec.PosixRun" title="exec.PosixRun"><code class="xref py py-class docutils literal"><span class="pre">exec.PosixRun</span></code></a></li>
</ul>
</dd></dl>

</div>
<div class="section" id="handlers">
<h2>Handlers<a class="headerlink" href="#handlers" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="exec.PosixRun">
<em class="property">class </em><code class="descclassname">exec.</code><code class="descname">PosixRun</code><a class="headerlink" href="#exec.PosixRun" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>A handler to execute commands on posix compatible systems. This is
a very atypical resource as this executes a command. The check_resource
method will determine based on the “reload_only”, “creates”, “unless”
and “onlyif” attributes if the command will be executed.</div></blockquote>
<ul class="simple">
<li>Handler name <code class="docutils literal"><span class="pre">posix</span></code></li>
<li>Handler for entity <a class="reference internal" href="#entity-exec::Run" title="exec::Run entity"><code class="xref inmanta inmanta-entity docutils literal"><span class="pre">exec::Run</span></code></a></li>
</ul>
</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="graphite.html" class="btn btn-neutral float-right" title="Module graphite" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="drupal.html" class="btn btn-neutral" title="Module drupal" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017 Inmanta NV.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2017.4dev',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>