
exec:
  prompt: "switch# "
  commands:
    "term length 0": ""
    "term width 511": ""
    "terminal session-timeout 0": ""
    "show system redundancy status" : |
      Redundancy mode
      ---------------
            administrative:   HA
               operational:   HA

      This supervisor (sup-5)
      -----------------------
          Redundancy state:   Active
          Supervisor state:   Active
            Internal state:   Active with HA standby

      Other supervisor (sup-6)
      ------------------------
          Redundancy state:   Standby
          Supervisor state:   HA standby
          Internal state:   HA standby
    "show redundancy status": |
      Redundancy mode
      ---------------
            administrative:   HA
               operational:   HA

      This supervisor (sup-5)
      -----------------------
          Redundancy state:   Active
          Supervisor state:   Active
            Internal state:   Active with HA standby

      Other supervisor (sup-6)
      ------------------------
          Redundancy state:   Standby

          Supervisor state:   HA standby
            Internal state:   HA standby

      System start time:          Sat May 19 02:52:21 2018

      System uptime:              5 days, 5 hours, 55 minutes, 9 seconds
      Kernel uptime:              5 days, 5 hours, 58 minutes, 34 seconds
      Active supervisor uptime:   5 days, 5 hours, 55 minutes, 9 seconds
    "config term":
      new_state: config
    "run bash":
      new_state: bash
    "run bash sudo su":
      new_state: bash_nxos
    "attach console module 1":
      new_state: console_login
    "reload":
      new_state: ha_confirm_reload

config:
  prompt: "switch(config)#"
  commands:
    "no logging console": ""
    "line console": ""
    "exec-timeout 0": ""
    "terminal width 511": ""
    'feature bash': ""
    "end":
      new_state: exec

bash:
  prompt: "bash-4.2$ "
  commands:
    "ls": |
      bootflash                  system                  bin
    "sudo yum list installed | grep n9000": |
      base-files.n9000                        3.0.14-r74.2                   installed
      bfd.lib32_n9000                         1.0.0-r0                       installed
    "exit":
      new_state: exec

### NXOS on N3K has different bash prompt

exec_n3k:
  prompt: "switch# "
  commands:
    "term length 0": ""
    "term width 511": ""
    "terminal session-timeout 0": ""
    "config term":
      new_state: config_n3k
    "run bash":
      new_state: bash_n3k

config_n3k:
  prompt: "switch(config)#"
  commands:
    "no logging console": ""
    "line console": ""
    "exec-timeout 0": ""
    "terminal width 511": ""
    "end":
      new_state: exec_n3k

bash_n3k:
  prompt: "Linux$ "
  commands:
    "ls": ""
    "exit":
      new_state: exec_n3k


bash_nxos:
  prompt: 'bash-3.0# '
  commands:
    "ls": ""
    "exit":
      new_state: exec

console_login:
  preface: "Escape character is ~,'"
  prompt: 'login:'
  commands:
    'root': 
      new_state: console_module_1

console_module_1:
  prompt: 'root@/:~#'
  commands:
    "export PS1='AUT0MAT10N# '": 
      new_state: console_new_prompt

console_new_prompt:
  prompt: 'AUT0MAT10N# '
  commands:
    '': ''
    'ls': 'aa'
    'exit':
      new_state: exit_console

exit_console:
  prompt: 'login:'
  commands:
    '~,': 
      new_state: exec

user_access_veri:
  preface: User Access Verification
  prompt: "switch login: "
  commands:
    "admin":
      new_state: user_password

user_password:
  prompt: "Password: "
  commands:
    "lab":
      new_state: exec

